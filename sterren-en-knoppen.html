<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sterraster â€“ groeiende ster</title>
   <link rel="stylesheet" href="styles/base.css">
<link rel="stylesheet" href="styles/sterren.css">
</head>
<body class="sterren">

<div class="image-overlay"></div>
<div id="grid"></div>

<div class="controls">
    <button class="btn-yellow" data-color="yellow">Geel</button>
    <button class="btn-gray" data-color="gray">Grijs</button>
    <button class="btn-blue" data-color="lightblue">Lichtblauw</button>
    <button class="btn-orange" data-color="orange">Oranje</button>
    <button class="btn-reset" id="reset">Reset</button>
    <button class="btn-rotate" id="toggleRotate">Stop rotatie</button>
    <button class="btn-letters" id="toggleLetters">Letters aan</button>
    <button class="btn-emoji" id="toggleEmoji">Emoji aan</button>
    <button class="btn-startpagina" id="home">Startpagina</button>
    <input type="range" id="transparencyRange" min="0" max="1" step="0.01" value="0.5">
</div>

<script>
const grid = document.getElementById('grid');
const overlay = document.querySelector('.image-overlay');
const transparencyRange = document.getElementById('transparencyRange');
const starSize = 40;
let cols, rows, stars = [];
let rotating = true;
let lettersOn = false;
let emojiOn = false;
let growingStar, startX, startY, grown = false;

function createStars() {
    grid.innerHTML = '';
    stars = [];
    grown = false;

    cols = Math.floor(window.innerWidth / starSize);
    rows = Math.floor(window.innerHeight / starSize);

    for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = `${x * starSize}px`;
            star.style.top  = `${y * starSize}px`;

            star.dataset.x = x * starSize;
            star.dataset.y = y * starSize;

            grid.appendChild(star);
            stars.push(star);
        }
    }

    const midCol = Math.floor(cols / 2);
    const midRow = Math.floor(rows / 2);

    growingStar = stars[midRow * cols + midCol];

    startX = parseFloat(growingStar.dataset.x);
    startY = parseFloat(growingStar.dataset.y);
}

createStars();

function generateLetters() {
    removeLetters();
    if (!grown || (!lettersOn && !emojiOn)) return;

    const container = document.createElement('div');
    container.className = 'letters';

    const count = 100;
    for (let i = 0; i < count; i++) {
        const span = document.createElement('span');
        span.className = 'letter';

        if (emojiOn) {
            const emojis = ['ðŸ˜€','ðŸ˜‚','ðŸ˜','ðŸ˜Ž','ðŸ¤©','ðŸ¥³','ðŸ˜œ','ðŸŒŸ','ðŸ”¥','ðŸ€','ðŸ’–','ðŸŽµ'];
            span.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        } else {
            span.textContent = String.fromCharCode(65 + Math.floor(Math.random() * 26));
            const gray = Math.floor(80 + Math.random() * 150);
            span.style.color = `rgb(${gray}, ${gray}, ${gray})`;
        }

        span.style.left = `${Math.random() * 100}%`;
        span.style.top  = `${Math.random() * 100}%`;
        span.style.fontSize = `${10 + Math.random() * 90}px`;

        container.appendChild(span);
    }

    growingStar.appendChild(container);
}

function removeLetters() {
    const existing = growingStar.querySelector('.letters');
    if (existing) existing.remove();
}

// GROEIEN / KLEIN WORDEN
document.addEventListener('pointerdown', (e) => {
    if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT') return;

    grown = !grown;

    if (grown) {
        const size = Math.min(500, window.innerWidth * 0.8, window.innerHeight * 0.8);
        growingStar.classList.add('grown');
        growingStar.style.backgroundColor = 'white';
        growingStar.style.width = `${size}px`;
        growingStar.style.height = `${size}px`;
        growingStar.style.left = `${(window.innerWidth - size) / 2}px`;
        growingStar.style.top  = `${(window.innerHeight - size) / 2}px`;
        generateLetters();
    } else {
        growingStar.classList.remove('grown');
        growingStar.style.width = '40px';
        growingStar.style.height = '40px';
        growingStar.style.left = startX + 'px';
        growingStar.style.top  = startY + 'px';
        removeLetters();
    }
});

// Kleuren
document.querySelectorAll('[data-color]').forEach(btn => {
    btn.addEventListener('click', () => {
        stars.forEach(star => {
            if (star !== growingStar) star.style.backgroundColor = btn.dataset.color;
        });
    });
});

// Reset
document.getElementById('reset').addEventListener('click', () => {
    grown = false;
    lettersOn = false;
    emojiOn = false;
    document.getElementById('toggleLetters').textContent = 'Letters aan';
    document.getElementById('toggleEmoji').textContent = 'Emoji aan';
    stars.forEach(star => {
        star.classList.remove('grown');
        star.style.width = '40px';
        star.style.height = '40px';
        star.style.backgroundColor = 'red';
        star.style.left = star.dataset.x + 'px';
        star.style.top  = star.dataset.y + 'px';
    });
    removeLetters();
});

// Rotatie
document.getElementById('toggleRotate').addEventListener('click', function () {
    rotating = !rotating;
    stars.forEach(star => {
        star.style.animationPlayState = rotating ? 'running' : 'paused';
    });
    this.textContent = rotating ? 'Stop rotatie' : 'Start rotatie';
});

// Letters aan/uit
document.getElementById('toggleLetters').addEventListener('click', function () {
    lettersOn = !lettersOn;
    if (lettersOn) emojiOn = false;
    this.textContent = lettersOn ? 'Letters uit' : 'Letters aan';
    generateLetters();
});

// Emoji aan/uit
document.getElementById('toggleEmoji').addEventListener('click', function () {
    emojiOn = !emojiOn;
    if (emojiOn) lettersOn = false;
    this.textContent = emojiOn ? 'Emoji uit' : 'Emoji aan';
    generateLetters();
});

// Startpagina
document.getElementById('home').addEventListener('click', () => {
    window.location.href = 'index.html';
});

// Transparantie slider
transparencyRange.addEventListener('input', function () {
    overlay.style.opacity = this.value;
});

window.addEventListener('resize', createStars);
</script>

</body>
</html>
